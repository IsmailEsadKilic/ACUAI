<h1>Topics</h1>

<% if current_user&.admin? %>
  <!--        <a class="btn" style="background: #003D7E" href="<%#= new_topic_path %>">-->
  <a class="btn" style="background: #003D7E" href="<%= new_topic_path %>">
    <i class="bi bi-plus"></i>
    New Topic
  </a>
<% end %>

<a class="btn mt-2" style="background: #003D7E" href="<%= pinned_posts_path %>">
  <i class="bi bi-pin-fill"></i>
  All Pinned Posts
</a>

<div>
<% @topics.each do |topic| %>

  <!-- <a href="posts?topic_id=<%#= topic.id %>" class="btn btn-sm btn-outline-light mt-2 ms-2 dontbecomeinviswhenhovered">-->
  <!-- don't use the above line because it will not work with the Rails router -->

  <% if current_user&.admin? %>

    <div class="btn-group mt-2">
      <a href="<%= posts_path(topic_id: topic.id) %>" class="btn btn-sm btn-outline-light dontbecomeinviswhenhovered ">
        <strong>
          <%= topic.name %>
        </strong> <br>
        <%= topic.description %>
      </a>
      <div class="btn-group-vertical">
        <a href="<%= edit_topic_path(topic) %>" class="btn btn-sm btn-outline-light dontbecomeinviswhenhovered" style="border-top-left-radius: 0">
          Edit
        </a>
        <%= link_to "Delete", topic, data: { turbo_method: :delete, turbo_confirm: "Are you sure?"}, class: "btn btn-sm btn-outline-light dontbecomeinviswhenhovered", style: "border-bottom-left-radius: 0" %>
        <!-- how do i make this DELETE instead of GET?? also how do i add a confirmation dialog?-->
<!--        <a href="<%##= topic_path(topic) %>"-->
<!--        class="btn btn-sm btn-outline-light dontbecomeinviswhenhovered" style="border-bottom-left-radius: 0">-->
<!--        Delete-->
        </a>
      </div>
    </div>
  <% else %>
    <div>
      <a href="<%= posts_path(topic_id: topic.id) %>" class="btn btn-sm btn-outline-light mt-2 dontbecomeinviswhenhovered">
        <strong>
          <%= topic.name %>
        </strong> <br>
        <%= topic.description %>
      </a>
    </div>
  <% end %>
<% end %>
</div>