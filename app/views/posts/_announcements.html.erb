<h2 class="announcements-header">Announcements</h2>

<div class="announcements-container">
  <% @announcements.each do |announcement| %>
    <div id="<%= dom_id announcement %>" class="card post-card" onclick="location.href='<%= post_path(announcement) %>';">
      <div class="post-meta">
        <% if announcement.pinned %>
          <i class="bi bi-pin-fill pin-icon"></i>
        <% end %>
        <span class="post-topic">
          <% if announcement.topic %>
            <strong><%= announcement.topic.name %></strong>
          <% else %>
            Uncategorized
          <% end %>
        </span>
        <span class="post-author">
          <% if announcement.user %>
            <%= link_to announcement.user.name, profile_user_path(announcement.user) %>
          <% else %>
            Anonymous
          <% end %>
        </span>
        <span class="post-time">
          <%= time_ago_in_words(announcement.created_at) %> ago
        </span>
      </div>

      <h3 class="post-title">
        <%= announcement.title %>
      </h3>

      <p class="post-body">
        <%= truncate(announcement.body.to_plain_text, length: 150) %>
      </p>
    </div>
  <% end %>
</div>
